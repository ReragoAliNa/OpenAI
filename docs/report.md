# OpenAI 捉迷藏系统复现实验报告

## 1. 实验背景
本实验旨在复现 OpenAI 发表的《Emergent Tool Use from Multi-Agent Autocurricula》。该研究展示了在简单的捉迷藏游戏中，多智能体如何通过自博弈（Self-play）涌现出复杂且具有策略性的行为，如移动箱子封门、使用坡道跨越障碍以及锁定工具防守。

## 2. 实验环境配置

### 2.1 软件栈
- **核心框架**: TensorFlow 1.15.0 (后端) + OpenAI Baselines
- **物理引擎**: MuJoCo 2.1.0
- **环境库**: `mujoco-worldgen` & `multi-agent-emergence-environments`
- **运行平台**: Windows 11 + WSL2 (Ubuntu 22.04)

### 2.2 关键兼容性修复
由于原项目基于 2019 年的技术环境，我们在复现过程中进行了以下关键修复：
1. **XML 解析修复**: 修正了 `xmltodict` 在新版本 Python 下返回字典类型不匹配导致的 `mujoco-worldgen` 断言失败。
2. **符号张量处理**: 修正了 `mae_envs` 中尝试将 TensorFlow 符号张量直接传递给 NumPy 函数（如 `np.all`）导致的崩溃，改用 TF 原生操作。
3. **WSL2 图形转发**: 配置了环境变量 `LD_PRELOAD` 加载系统 `libGLEW`，解决了分布式环境下常见的 OpenGL 初始化异常。

## 3. 实验过程与结果

### 3.1 运行指令
在 WSL2 中执行以下脚本即可启动预训练模型的推理演示：
```bash
# 自动安装与配置
bash scripts/wsl_setup.sh

# 启动仿真
bash scripts/wsl_run.sh
```

### 3.2 观察到的涌现行为
在本实验提供的 `hide_and_seek_quadrant`（象限地图）场景中，我们可以观察到：
- **第一阶段 (基础寻找)**: 寻找者无目的地搜索，躲避者随机逃跑。
- **第二阶段 (封堵门禁)**: 躲避者学会将场景中的方块推向门口，通过阻挡寻路来获取安全。
- **第三阶段 (坡道利用)**: 寻找者学会推动坡道，利用坡道跳过围墙进入躲避者的安全区。
- **第四阶段 (工具锁定)**: 躲避者学会先将方块推到位，然后将坡道也拉入房间或锁定，从而彻底阻断寻找者的进入路径。

## 4. 结论
本项目成功在现代 WSL2 环境下复现了 OpenAI 捉迷藏实验的核心链路。实验证明，即便在 2024/2025 年的环境下，通过精确的依赖管理（Python 3.7 + TF 1.15）和针对性的源码补丁，仍能完美重现这一经典的多智能体演化过程。

